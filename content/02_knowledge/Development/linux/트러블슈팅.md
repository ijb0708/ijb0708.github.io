---
tags:
  - kubernetes
  - linux
---

# longborn ì—ëŸ¬ëª¨ìŒ

## iSCSI ë¯¸ì„¤ì¹˜ ë¬¸ì œ
### - ë¬¸ì œ ì›ì¸
```
fatal msg="...please make sure you have iscsiadm/open-iscsi installed on the host..."
```

> ğŸ“Œ **Longhornì€ ë‚´ë¶€ì ìœ¼ë¡œ iSCSIë¥¼ ì‚¬ìš©í•´ì„œ ë¸”ë¡ ë””ë°”ì´ìŠ¤ë¥¼ ì—°ê²°**í•˜ëŠ”ë°,  
> â†’ **`iscsiadm` (open-iscsi)** íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šì•„ì„œ longhorn-managerê°€ ì‹¤í–‰ë˜ì§€ ëª»í•˜ê³  ìˆìŒ.

### - í•´ê²° ë°©ë²•: `open-iscsi` ì„¤ì¹˜
```bash
sudo apt update
sudo apt install -y open-iscsi
sudo systemctl enable --now iscsid
```

â†’ ëª¨ë“  **Longhornì´ ì„¤ì¹˜ëœ ë…¸ë“œ(ì¦‰, longhorn-managerê°€ ì‹¤í–‰ ë…¸ë“œ ì „ë¶€)ì— ì´ê±¸ ì„¤ì¹˜ ì´í›„ systemctlë¡œ ì—°ê²°

### - í™•ì¸ë°©ë²•
```bash
kubectl -n longhorn-system get pods
```

â†’ CrashLoopBackOff ìƒíƒœê°€ ì‚¬ë¼ì§€ê³  `Running`ìœ¼ë¡œ ë°”ë€ŒëŠ”ì§€ í™•ì¸

# traefik ì ‘ê·¼ë¶ˆê°€ ë¬¸ì œ

// ì •ë¦¬í•„ìš”

### 1. ê¸°ì¡´ Dashboardìš© `IngressRoute` ë¦¬ì†ŒìŠ¤ë¥¼ ìˆ˜ì •

bash

Copy code

`kubectl edit ingressroute traefik-dashboard -n traefik-system`

> vi í¸ì§‘ê¸°ë¡œ ì—´ë¦´ í…ë°, ì´ ë¶€ë¶„ì„ ì°¾ì•„ì„œ:

yaml

Copy code

```
spec:   
	entryPoints:    
		- traefik   # âŒ ì´ê±¸
```

ë¥¼

yaml

Copy code

```
spec:
	entryPoints:     
		- web       # âœ… ì´ë ‡ê²Œ
		- websecure # https ë¥¼ ì›í• ê²½ìš° ì¶”ê°€ê°€ëŠ¥
```

ìœ¼ë¡œ ë°”ê¿”ì¤˜.

---

```markdown
# Traefik Dashboard 404 ë¬¸ì œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê¸°ë¡

## ğŸ§© ë¬¸ì œ ìš”ì•½

- Helmìœ¼ë¡œ Traefik ì„¤ì¹˜ í›„ `/dashboard/` ê²½ë¡œì— ì ‘ì† ì‹œë„
- `http://<ë…¸ë“œIP>:<NodePort>/dashboard/` ë¡œ ì ‘ì†í–ˆì§€ë§Œ **404 Not Found** ë°œìƒ

## ğŸ“„ í™˜ê²½ ì •ë³´

- Traefik ì„¤ì¹˜: Helm chart ì‚¬ìš©
- `traefik-values.yaml` êµ¬ì„±:
  ```yaml
  ingressRoute:
    dashboard:
      enabled: true
```

- NodePortëŠ” ì—´ë ¤ ìˆì—ˆê³ , Traefik Podë„ ì •ìƒ Running ìƒíƒœ
    

## ğŸš¨ ì›ì¸ ë¶„ì„

- ê¸°ë³¸ ì„¤ì •ì—ì„œ `dashboard` IngressRouteëŠ” ë‹¤ìŒì²˜ëŸ¼ ì„¤ì •ë¨:
    
    ```yaml
    entryPoints:
      - traefik
    ```
    
- ì¦‰, ì™¸ë¶€ í¬íŠ¸(ì˜ˆ: `web` â†’ 80, `websecure` â†’ 443)ê°€ ì•„ë‹ˆë¼,  
    ë‚´ë¶€ ì „ìš© EntryPointì¸ `traefik` (:9000)ì—ë§Œ ì—´ë ¤ ìˆì—ˆìŒ
    
- ê²°ê³¼ì ìœ¼ë¡œ **ì™¸ë¶€ ì ‘ì†ìœ¼ë¡œëŠ” Dashboardì— ë„ë‹¬í•  ìˆ˜ ì—†ì—ˆìŒ**
    

## ğŸ”§ í•´ê²° ë°©ë²•

- `traefik-values.yaml`ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •:
    
    ```yaml
    ingressRoute:
      dashboard:
        enabled: true
        entryPoints:
          - web
    ```
    
- ê·¸ë¦¬ê³  Helm ì—…ê·¸ë ˆì´ë“œë¡œ ì ìš©:
    
    ```bash
    helm upgrade traefik traefik/traefik \
      -n traefik-system \
      -f traefik-values.yaml
    ```
    
- ì´í›„ `http://<ë…¸ë“œIP>:<NodePort>/dashboard/` ì •ìƒ ì ‘ì† í™•ì¸
    

## âœ… ì¶”ê°€ í™•ì¸ ë°©ë²•

- ë‚´ë¶€ì—ì„œë§Œ ì ‘ì† ê°€ëŠ¥í•œ ê²½ìš° `kubectl port-forward`ë¡œ ë¡œì»¬ í¬íŠ¸ ì—°ê²°
    
    ```bash
    kubectl port-forward -n traefik-system deployment/traefik 9000:9000
    ```
    
    â†’ ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:9000/dashboard/` í™•ì¸
    

## ğŸ§  êµí›ˆ

- Traefikì˜ DashboardëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‚´ë¶€ EntryPoint(`traefik`)ì—ë§Œ ì—´ë ¤ ìˆë‹¤
    
- ì™¸ë¶€ ë…¸ì¶œì„ ì›í•œë‹¤ë©´ ë°˜ë“œì‹œ EntryPointë¥¼ `web` ë˜ëŠ” `websecure`ë¡œ ì§€ì •í•´ì¤˜ì•¼ í•œë‹¤
    
- `entryPoints`ëŠ” IngressRoute ë‹¨ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì • ê°€ëŠ¥í•¨
    
---
# ë¦¬ëˆ…ìŠ¤ ì—ëŸ¬ëª¨ìŒ

## fastab ì˜ëª»ëœ ì„¤ì •ì´í›„ ë¶€íŒ…ë¶ˆê°€ í˜„ìƒ

### - ë°©ë²• 1: root ì‰˜(ë¹„ìƒ ì…¸) ì§„ì…

ì¬ë¶€íŒ… í›„ ì•„ë˜ì²˜ëŸ¼ ë‚˜ì˜¬ë•Œ:

```
You are now in emergency mode.
Give root password for maintenance
(or press Control-D to continue):
```

â†’ ì—¬ê¸°ì„œ **root ë¹„ë°€ë²ˆí˜¸ ì…ë ¥** ì´í›„, ì‰˜ë¡œ ì§„ì…

```bash
vi /etc/fstab
```

â†’ ì˜ëª»ëœ ì¤„ ìˆ˜ì •í•˜ê±°ë‚˜, `#`ìœ¼ë¡œ ì£¼ì„ ì²˜ë¦¬

â†’ ì €ì¥ í›„ ì¬ë¶€íŒ…

```bash
reboot
```
### - ë°©ë²• 2: ë¶€íŒ… ì‹œ `GRUB`ì—ì„œ ìˆ˜ë™ ë³µêµ¬

1. ë¶€íŒ… ì‹œ `Grub` ë©”ë‰´ ëœ° ë•Œ `e` í‚¤ ëˆŒëŸ¬
    
2. `linux` ì»¤ë„ ì¤„ ëì— ë‹¤ìŒ ì¶”ê°€:

```
systemd.unit=emergency.target
```

3. `Ctrl + X` ë˜ëŠ” `F10` ëˆŒëŸ¬ ë¶€íŒ…
    
4. ìœ„ì™€ ê°™ì€ root ì…¸ë¡œ ë“¤ì–´ê° â†’ ìˆ˜ì •

### - ì˜ˆë°©ë²•: fstabì—ì„œ ìë™ ë§ˆìš´íŠ¸ ì‹¤íŒ¨í•´ë„ ë¶€íŒ…í•˜ê²Œ í•˜ë ¤ë©´

ë‹¤ìŒì²˜ëŸ¼ `nofail` ë˜ëŠ” `defaults,nofail` ì˜µì…˜ì„ ì¶”ê°€í•˜ë©´  
â†’ **ì‹¤íŒ¨í•´ë„ ë¶€íŒ… ìì²´ëŠ” ì§„í–‰ë¼**:

```fstab
UUID=xxxx-xxxx /mnt/longhorn-data ext4 defaults,nofail 0 2
```
---

