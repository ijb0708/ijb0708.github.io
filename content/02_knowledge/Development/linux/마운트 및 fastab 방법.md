---
tags:
  - linux
---
## 1. 사용 디스크 확인

```bash
lsblk
```

출력 예시:

```
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda      8:0    0   32G  0 disk
└─sda1   8:1    0   32G  0 part /
sdb      8:16   0  300G  0 disk   <-- 이게 SSD
```

> 여기서 용량을 및 정보를 확인하여 어떤게 마운트할 대상인지 찾아볼것!
> 해당예제에서는 `sdb`가 마운트할 대상이다.
> 
## 2. SSD 포맷 및 마운트

### - ext4로 포맷

```bash
sudo mkfs.ext4 /dev/sdb
```

> `sdb` 전체를 포맷 (파티션 나누지 않고 전체 사용)

### - 마운트 경로 만들기

```bash
sudo mkdir -p /mnt/longhorn-data
```
### - 마운트 실행

```bash
sudo mount /dev/sdb /mnt/longhorn-data
```

---

## 3. 마운트 확인

```bash
df -h | grep longhorn
```

출력 예시:

```
/dev/sdb       295G   1G  280G   1% /mnt/longhorn-data
```

---

## 4. 부팅 시 자동 마운트 설정

## 4.1. UUID 또는 LAVEL 추가
```bash
sudo blkid /dev/sdb
```

> 이제 재부팅해도 자동 마운트됨.

## 4.2. 형식 요약

```bash
<device>  <mountpoint>  <filesystem>  <options>  <dump>  <pass>
UUID=abcd-1234  /mnt/longhorn-data  ext4  defaults  0  2

```
#### 4.2.1. `0 2`의 의미

| 위치  | 이름       | 설명                                      |
| --- | -------- | --------------------------------------- |
| `0` | **dump** | 백업 유틸리티(dump)가 이 파일시스템을 백업 대상으로 사용할지 설정 |
| `2` | **pass** | 부팅 시 파일시스템을 검사하는 순서를 지정함 (`fsck`)       |
##### * 첫 번째 숫자: `dump` (보통 0)

- 옛날 백업 유틸리티 `dump`에서 사용
    
- 요즘은 거의 안 씀 → 항상 `0`으로 설정해도 됨

##### * 두 번째 숫자: `fsck 순서` (파일시스템 체크 순서)

|값|의미|
|---|---|
|`0`|**부팅 시 검사하지 않음** (보통 네트워크 마운트 등 비중요 파티션)|
|`1`|**루트 파일시스템** (오직 하나만 있어야 함)|
|`2`|**그 외 다른 디스크** → 루트 이후 순서대로 검사됨|

→ 일반적으로 **루트가 아닌 디스크는 모두 `2`를 줘**  
→ 그래서 `defaults 0 2`가 **전형적인 비-루트 마운트 설정**

#### 4.2.2. 결론적인 의미

| 설정             | 의미                                    |
| -------------- | ------------------------------------- |
| `defaults 0 2` | 일반적인 추가 디스크용 설정 (자동 마운트, 검사함, 백업 안 함) |
| `defaults 0 0` | 검사도 안 하고, 백업도 안 함 (임시 마운트 같은 경우)      |
| `defaults 0 1` | 루트 디스크만 설정 (기본적으로 `/` 에만 사용해야 함)      |
- **ssd 스토리지용 디스크의 경우 default 0 2 가 적합**
#### 4.3. 마운트 테스트하는법

수정 전:
```bash
sudo mount -a
```

→ fstab에 설정된 항목을 실제로 다 마운트해봄  
→ 에러 나는 줄 바로 알 수 있음

### 4.3. 만약에 fstab을 잘못 설정하여 부팅이 되지 않을경우
- [[트러블슈팅#fastab 잘못된 설정이후 부팅불가 현상|항목참조]]